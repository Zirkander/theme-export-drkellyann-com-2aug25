setTimeout(function(){async function getProductData(productHandle){return await(await fetch("/products/"+productHandle+".json")).json()}const $broth={selector:document.getElementById("broth-selector"),selected:document.querySelector(".selected-broth"),circle:document.querySelector(".selected-broth .circle"),name:document.querySelector(".selected-broth .broth-name"),all:document.getElementsByClassName("single-broth")},productImages={allMain:document.querySelectorAll(".swiper-slide img"),productZoom:document.querySelectorAll(".product_media__zoom")},checkFlavors=()=>{const selectedFlavor=$broth.selected.getAttribute("data-flavor"),broths=document.getElementsByClassName("single-broth");for(const broth of broths)broth.getAttribute("data-flavor")===selectedFlavor?broth.classList.add("hover"):broth.classList.remove("hover")};checkFlavors();function getSellingPlanSchedule(){const selectElement=document.querySelector(".loop-widget-sp-selector");if(console.log("selectElement",selectElement),selectElement){const selectedOption=selectElement.options[selectElement.selectedIndex];return console.log("selected",selectedOption.innerHTML),{text:selectedOption.innerHTML,index:selectElement.selectedIndex}}return{text:"",index:0}}function getSelectedVariant(){const radioElements=document.querySelectorAll('input[name="option-1"]');for(const radioElement of radioElements)if(radioElement.checked)return radioElement.value}$broth.selected.addEventListener("click",function(){$broth.selector.classList.toggle("active")});function refreshYotpo(){}const flavorSwitched=new Event("flavorSwitched");for(const singleBroth of $broth.all)singleBroth.addEventListener("click",function(){singleBroth.classList.contains("hover")||document.dispatchEvent(flavorSwitched);const thisFlavor={data:singleBroth.getAttribute("data-flavor"),name:singleBroth.getAttribute("data-flavor-string"),handle:singleBroth.getAttribute("data-handle"),productId:singleBroth.getAttribute("data-product-id"),description:singleBroth.getAttribute("data-product-description"),flavorColor:singleBroth.getAttribute("data-flavor-color"),shortDescription:singleBroth.getAttribute("data-short-description"),longDescription:singleBroth.getAttribute("data-long-description"),sizeBasedImage:singleBroth.getAttribute("data-size-based-image"),productImage:singleBroth.getAttribute("data-product-image"),productTitle:singleBroth.getAttribute("data-product-title"),pdpCms:singleBroth.getAttribute("data-pdp-cms"),comparisonHeading:singleBroth.getAttribute("data-comparison-title"),comparisonImage:singleBroth.getAttribute("data-comparison-image"),comparisonImageMobile:singleBroth.getAttribute("data-comparison-image-mobile"),lifestyleImage:singleBroth.getAttribute("data-lifestyle-image"),lifestyleImageMobile:singleBroth.getAttribute("data-lifestyle-image-mobile"),ingredients:singleBroth.getAttribute("data-ingredients"),ingredients_bg:singleBroth.getAttribute("data-ingredients-bg"),ingredientsList:singleBroth.getAttribute("data-ingredients-list"),ingredientsTitle:singleBroth.getAttribute("data-ingredients-title"),howToMedia:singleBroth.getAttribute("data-how-to-media"),delayDescription:singleBroth.getAttribute("data-delay-description"),box2:singleBroth.getAttribute("data-2-box"),box4:singleBroth.getAttribute("data-4-box"),box6:singleBroth.getAttribute("data-6-box"),box2inventory:singleBroth.getAttribute("data-2-box-inventory"),box4inventory:singleBroth.getAttribute("data-4-box-inventory"),box6inventory:singleBroth.getAttribute("data-6-box-inventory"),box2selling:singleBroth.getAttribute("data-2-keep-selling"),box4selling:singleBroth.getAttribute("data-4-keep-selling"),box6selling:singleBroth.getAttribute("data-6-keep-selling"),sellingPlan2:singleBroth.getAttribute("data-selling-plan-2"),sellingPlan3:singleBroth.getAttribute("data-selling-plan-3"),sellingPlan4:singleBroth.getAttribute("data-selling-plan-4"),sellingPlan5:singleBroth.getAttribute("data-selling-plan-5"),sellingPlan6:singleBroth.getAttribute("data-selling-plan-6"),sellingPlan7:singleBroth.getAttribute("data-selling-plan-7"),sellingPlan8:singleBroth.getAttribute("data-selling-plan-8")},existingFlavor={data:$broth.selected.getAttribute("data-flavor"),handle:$broth.selected.getAttribute("data-handle"),sizeBasedImage:$broth.selected.getAttribute("data-size-based-image"),description:document.querySelector(".product-description__content-inner"),shortDescription:document.querySelector(".product__short-description"),longDescription:document.querySelector(".product__long-description"),productTitle:document.querySelector(".product-description__title"),productImage:document.querySelector(".product-description__image img"),comparisonHeading:document.querySelector(".comparison__title.small-hide"),comparisonHeadingMobile:document.querySelector(".comparison__title.large-hide"),comparisonImage:document.querySelector(".comparison__background.small-hide img"),comparisonImageMobile:document.querySelector(".comparison__background.large-hide img"),lifestyleImage:document.querySelector(".lifestyle__background.small-hide img"),lifestyleImageMobile:document.querySelector(".lifestyle__background.large-hide img"),ingredients:document.querySelector(".ingredients__image [data-popup-btn]"),ingredients_bg:document.querySelector(".ingredients__image img"),ingredientsTitle:document.querySelector(".ingredients__content-title"),ingredientsList:document.querySelector(".ingredients__list"),howToMedia:document.querySelector(".how-to__media"),delayDescription:document.querySelector(".delay")},addToCartBtn=document.querySelector(".product__submit"),addToCartBtnFlavor=document.querySelector(".submit.flavor");console.log("thisFlavor2",thisFlavor),window.history.pushState({},"","/products/"+thisFlavor.handle),$broth.circle.classList.remove(existingFlavor.data),$broth.circle.style.backgroundColor=thisFlavor.flavorColor,document.querySelector(".yotpo.bottomLine")?.setAttribute("data-product-id",thisFlavor.productId),document.querySelector(".yotpo-main-reviews-widget")?.setAttribute("data-product-id",thisFlavor.productId),$broth.circle.classList.add(thisFlavor.data),$broth.name.classList.add(thisFlavor.data),$broth.selected.setAttribute("data-flavor",thisFlavor.data),$broth.selected.setAttribute("data-flavor-string",thisFlavor.name),$broth.selected.setAttribute("data-handle",thisFlavor.handle),$broth.selected.setAttribute("data-size-based-image",thisFlavor.sizeBasedImage),$broth.name.innerHTML=thisFlavor.name,checkFlavors(),existingFlavor.longDescription.innerHTML=thisFlavor.longDescription,console.log("thisFlavor.comparisonHeading",thisFlavor.comparisonHeading),console.log("thisFlavor.comparisonImage",thisFlavor.comparisonImage),existingFlavor.comparisonHeading&&(existingFlavor.comparisonHeading.innerHTML=thisFlavor.comparisonHeading,existingFlavor.comparisonHeadingMobile.innerHTML=thisFlavor.comparisonHeading,existingFlavor.comparisonImage.src=thisFlavor.comparisonImage,existingFlavor.comparisonImageMobile.src=thisFlavor.comparisonImageMobile),console.log("------------------");let contentBlocksbySection=document.querySelectorAll(".product-blocks .product-blocks__item");for(let i=0;i<contentBlocksbySection.length;i++)contentBlocksbySection[i].classList.remove("d-none");if(thisFlavor.pdpCms&&thisFlavor.pdpCms!="null"){const pdpCmsJson=thisFlavor.pdpCms?JSON.parse(thisFlavor.pdpCms):{};console.log(pdpCmsJson);for(const[key,value]of Object.entries(pdpCmsJson)){console.log(value);let contentBlocksbySection2=document.querySelectorAll(`.product-blocks--${value.section_name} .product-blocks__item`);for(let i=0;i<contentBlocksbySection2.length;i++)value.content[i].active=="1"?contentBlocksbySection2[i].classList.remove("d-none"):contentBlocksbySection2[i].classList.add("d-none")}}console.log("------------------"),existingFlavor.lifestyleImage&&(existingFlavor.lifestyleImage.src=thisFlavor.lifestyleImage,existingFlavor.lifestyleImageMobile.src=thisFlavor.lifestyleImageMobile);const selectedSellingPlan2=getSellingPlanSchedule()?.text,selectedSellingPlanIndex=getSellingPlanSchedule()?.index,sellingPlanArray=[thisFlavor.sellingPlan2,thisFlavor.sellingPlan3,thisFlavor.sellingPlan4,thisFlavor.sellingPlan5,thisFlavor.sellingPlan6,thisFlavor.sellingPlan7,thisFlavor.sellingPlan8];document.getElementById("flavor_selector_type").value==="Lemon Sips"?selectedSellingPlan2==="Deliver every 4 weeks"?$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan2):selectedSellingPlan2==="Deliver every 6 weeks"?$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan3):selectedSellingPlan2==="Deliver every 8 weeks"?$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan4):selectedSellingPlan2==="Deliver every 12 weeks"&&$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan5):$broth.selected.setAttribute("data-selling-plan",sellingPlanArray[selectedSellingPlanIndex]);const variantBoxes2=getSelectedVariant();variantBoxes2==="2 Boxes"||variantBoxes2==="1 Case"?$broth.selected.setAttribute("data-variant-id",thisFlavor.box2):variantBoxes2==="4 Boxes"||variantBoxes2==="2 Cases"?$broth.selected.setAttribute("data-variant-id",thisFlavor.box4):(variantBoxes2==="6 Boxes"||variantBoxes2==="3 Cases")&&$broth.selected.setAttribute("data-variant-id",thisFlavor.box6);let soldOut2=!1,soldOut4=!1,soldOut6=!1;const swatches=document.querySelector('.swatch[data-option-index="0"]'),swatchesWrapper=document.querySelector(".swatches-wrapper");thisFlavor.box2inventory<=1&&thisFlavor.box2selling!=="continue"?(document.querySelector('.product-option__select li span[data-value="2 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="2 Boxes"]').classList.add("soldout"),soldOut2=!0):document.querySelector('.product-option__select li span[data-value="2 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="2 Boxes"]').classList.remove("soldout"),thisFlavor.box4inventory<=1&&thisFlavor.box4selling!=="continue"?(document.querySelector('.product-option__select li span[data-value="4 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="4 Boxes"]').classList.add("soldout"),soldOut4=!0):document.querySelector('.product-option__select li span[data-value="4 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="4 Boxes"]').classList.remove("soldout"),thisFlavor.box6inventory<=1&&thisFlavor.box6selling!=="continue"?(document.querySelector('.product-option__select li span[data-value="6 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="6 Boxes"]').classList.add("soldout"),soldOut6=!0):document.querySelector('.product-option__select li span[data-value="6 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="6 Boxes"]').classList.remove("soldout"),thisFlavor.box6inventory<=1&&thisFlavor.box6selling!=="continue"?(document.querySelector('.product-option__select li span[data-value="6 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="6 Boxes"]').classList.add("soldout"),soldOut6=!0):document.querySelector('.product-option__select li span[data-value="6 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="6 Boxes"]').classList.remove("soldout"),document.getElementById("flavor-is-soldout")&&(!soldOut2||!soldOut4||!soldOut6)&&window.location.reload(),soldOut2&&soldOut4&&soldOut6?(window.location.reload(),addToCartBtn&&(addToCartBtn.classList.add("disabled"),addToCartBtn.setAttribute("disabled","disabled"),addToCartBtn.innerHTML="Sold Out"),addToCartBtnFlavor&&(addToCartBtnFlavor.classList.add("disabled"),addToCartBtnFlavor.setAttribute("disabled","disabled"),addToCartBtnFlavor.innerHTML="Sold Out")):(addToCartBtn&&(addToCartBtn.classList.remove("disabled"),addToCartBtn.removeAttribute("disabled"),addToCartBtn.innerHTML="Add to cart"),addToCartBtnFlavor&&(addToCartBtnFlavor.classList.remove("disabled"),addToCartBtnFlavor.removeAttribute("disabled"),addToCartBtnFlavor.innerHTML="Add to cart")),getProductData(thisFlavor.handle).then(function(result){const images=result.product.images;for(const[index,image]of images.entries())index>=0&&index<images.length&&(productImages.allMain[index].src=image.src,productImages.allMain[index].srcset=image.src,productImages.productZoom[index].setAttribute("data-src",image.src),productImages.productZoom[index].setAttribute("data-background-image",image.src))}),document.getElementById("flavor_selector_type")&&(document.getElementById("flavor_selector_type").value==="Bone Broth"&&(document.querySelector(".product__title").innerHTML=thisFlavor.productTitle),document.getElementById("flavor_selector_type").value==="Lemon Sips"&&(thisFlavor.name==="Lemon Sips"?document.querySelector(".product__title").innerHTML="Lemon Sips":document.querySelector(".product__title").innerHTML="Lemon Sips - "+thisFlavor.name)),$broth.selector.classList.toggle("active")});function productOptionsChange(){const productOptions=document.querySelectorAll(".product-option__select li"),submitButton=document.querySelector(".product__submit"),submitFlavor=document.querySelector(".submit.flavor");console.log("product options change");for(const productOption of productOptions)productOption.addEventListener("click",function(){productOption.querySelector("span").classList.contains("soldout")?(submitButton&&(submitButton.classList.add("disabled"),submitButton.setAttribute("disabled","disabled")),submitFlavor&&(submitFlavor.classList.add("disabled"),submitFlavor.setAttribute("disabled","disabled")),setTimeout(function(){submitButton&&(submitButton.innerHTML="Sold Out"),submitFlavor&&(submitFlavor.innerHTML="Sold Out")},6)):(submitButton&&(submitButton.classList.remove("disabled"),submitButton.removeAttribute("disabled")),submitFlavor&&(submitFlavor.classList.remove("disabled"),submitFlavor.removeAttribute("disabled")),setTimeout(function(){submitButton&&(submitButton.innerHTML="Add to Cart"),submitFlavor&&(submitFlavor.innerHTML="Add to Cart")},6))})}productOptionsChange();function getPurchaseOption(){const options=document.getElementsByName("purchaseOption");for(const option of options)if(option.checked)return option.value;return null}const variantOptions=document.querySelectorAll('input[name="option-1"]');for(const radioElement of variantOptions)radioElement.addEventListener("change",function(){const selectedHandle=$broth.selected.getAttribute("data-handle");this.value==="2 Boxes"||variantBoxes==="1 Case"?$broth.selected.setAttribute("data-variant-id",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-2-box")):this.value==="4 Boxes"||variantBoxes==="2 Cases"?$broth.selected.setAttribute("data-variant-id",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-4-box")):(this.value==="6 Boxes"||variantBoxes==="3 Cases")&&$broth.selected.setAttribute("data-variant-id",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-6-box"))});document.addEventListener("flavorSwitched",e=>{console.log("flavor switched");let submitButton=document.querySelector(".product__submit"),submitFlavor=document.querySelector(".submit.flavor"),klaviyoBIS=document.querySelector(".klaviyo-bis-trigger"),rechargeBox=document.querySelector(".rc-widget-injection-parent");rechargeBox&&rechargeBox.classList.remove("d-none"),submitFlavor&&submitFlavor.classList.remove("d-none"),submitButton&&submitButton.classList.add("d-none"),klaviyoBIS&&klaviyoBIS.classList.add("d-none"),document.getElementById("flavor_selector").value="true"},!1),document.getElementById("flavor_selector")&&document.querySelector(".submit.flavor").addEventListener("click",function(){let selectedOption;document.querySelector(".loop-widget-purchase-option-selected .loop-widget-purchase-option-label")?document.querySelector(".loop-widget-purchase-option-selected .loop-widget-purchase-option-label").innerHTML==="One-time purchase"?selectedOption="onetime":selectedOption="subscription":selectedOption="onetime",console.log("selectedOption",selectedOption);const selectedHandle=$broth.selected.getAttribute("data-handle"),selectedSellingPlan2=getSellingPlanSchedule()?.text,selectedSellingPlanIndex=getSellingPlanSchedule()?.index,selectedBroth=document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]'),sellingPlanArray=[selectedBroth.getAttribute("data-selling-plan-2"),selectedBroth.getAttribute("data-selling-plan-3"),selectedBroth.getAttribute("data-selling-plan-4"),selectedBroth.getAttribute("data-selling-plan-5"),selectedBroth.getAttribute("data-selling-plan-6"),selectedBroth.getAttribute("data-selling-plan-7"),selectedBroth.getAttribute("data-selling-plan-8")],masterSelect=document.querySelector("#master-select"),selectedDataOption=masterSelect.options[masterSelect.selectedIndex].getAttribute("data-option-1");let productId=selectedBroth.getAttribute("data-2-box"),variantId,flavor_group_by=document.getElementById("flavor_group_by").value;if(document.getElementById("flavor_selector_type").value==="Lemon Sips"?(selectedDataOption==="1 Jar"&&(variantId=selectedBroth.getAttribute("data-2-box")),selectedDataOption==="3 Jars"&&(variantId=selectedBroth.getAttribute("data-4-box")),selectedDataOption==="6 Jars"&&(variantId=selectedBroth.getAttribute("data-6-box"))):flavor_group_by==="Collagen Cooler"?(selectedDataOption==="1 Pack"&&(variantId=selectedBroth.getAttribute("data-2-box")),selectedDataOption==="3 Packs"&&(variantId=selectedBroth.getAttribute("data-4-box")),selectedDataOption==="6 Packs"&&(variantId=selectedBroth.getAttribute("data-6-box"))):flavor_group_by==="Lemon Sips Plus"?(selectedDataOption==="1 Jar"&&(variantId=selectedBroth.getAttribute("data-2-box")),selectedDataOption==="3 Jars"&&(variantId=selectedBroth.getAttribute("data-4-box")),selectedDataOption==="6 Jars"&&(variantId=selectedBroth.getAttribute("data-6-box"))):((selectedDataOption==="2 Boxes"||selectedDataOption==="1 Case")&&(variantId=selectedBroth.getAttribute("data-2-box")),(selectedDataOption==="4 Boxes"||selectedDataOption==="2 Cases")&&(variantId=selectedBroth.getAttribute("data-4-box")),(selectedDataOption==="6 Boxes"||selectedDataOption==="3 Cases")&&(variantId=selectedBroth.getAttribute("data-6-box"))),selectedOption==="onetime")brothAddToCart(variantId,1,"",productId);else if(selectedOption==="subscription"){let sellingPlanId;console.log("selectedSellingPlan",selectedSellingPlan2),document.getElementById("flavor_selector_type").value==="Lemon Sips"?selectedSellingPlan2==="Deliver every 4 weeks"?sellingPlanId=selectedBroth.getAttribute("data-selling-plan-2"):selectedSellingPlan2==="Deliver every 6 weeks"?sellingPlanId=selectedBroth.getAttribute("data-selling-plan-3"):selectedSellingPlan2==="Deliver every 8 weeks"?sellingPlanId=selectedBroth.getAttribute("data-selling-plan-4"):selectedSellingPlan2==="Deliver every 12 weeks"&&(sellingPlanId=selectedBroth.getAttribute("data-selling-plan-5")):sellingPlanId=sellingPlanArray[selectedSellingPlanIndex],brothAddToCart(variantId,1,sellingPlanId,productId)}});async function brothAddToCart(variantId,quantity,sellingPlan,productId){console.log("brothAddToCart",variantId||productId,quantity,sellingPlan);let formData={items:[{id:variantId||productId,quantity,selling_plan:sellingPlan}]};console.log("formData",formData),fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(formData)}).then(response=>response.json()).then(data=>console.log(data)).catch(error=>{console.error("Error:",error)})}document.addEventListener("change",function(event){const target=event.target,sellingPlanHtml=document.querySelector(".rc-selling-plans-dropdown__select option:checked");if(typeof sellingPlanHtml<"u"&&sellingPlanHtml!=null&&target.matches(".rc-selling-plans-dropdown__select")){const selectedValue=sellingPlanHtml.innerHTML,selectedHandle=$broth.selected.getAttribute("data-handle");selectedValue==="Deliver every 2 Weeks"||selectedSellingPlan==="Deliver every month"?$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-2")):selectedValue==="Deliver every 3 Weeks"||selectedSellingPlan==="Deliver every 2 months"?$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-3")):selectedValue==="Deliver every 4 Weeks"||selectedSellingPlan==="Deliver every 3 months"?$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-4")):selectedValue==="Deliver every 5 Weeks"||selectedSellingPlan==="Deliver every 9 months"?$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-5")):selectedValue==="Deliver every 6 Weeks"||selectedSellingPlan==="Deliver every 12 months"?$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-6")):selectedValue==="Deliver every 7 Weeks"?$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-7")):selectedValue==="Deliver every 8 Weeks"&&$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-8"))}})},1e3);
//# sourceMappingURL=/cdn/shop/t/229/assets/product-v3.js.map?v=88449156601298476471753131824
