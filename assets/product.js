setTimeout(function(){async function getProductData(productHandle){return await(await fetch("/products/"+productHandle+".json")).json()}const $broth={selector:document.getElementById("broth-selector"),selected:document.querySelector(".selected-broth"),circle:document.querySelector(".selected-broth .circle"),name:document.querySelector(".selected-broth .broth-name"),all:document.getElementsByClassName("single-broth")},productImages={allMain:document.querySelectorAll(".swiper-slide img")},checkFlavors=()=>{const selectedFlavor=$broth.selected.getAttribute("data-flavor"),broths=document.getElementsByClassName("single-broth");for(const broth of broths)broth.getAttribute("data-flavor")===selectedFlavor?broth.classList.add("hover"):broth.classList.remove("hover")};checkFlavors();function getSellingPlanSchedule(){const selectElement=document.querySelector(".rtx-subscription-dropdown");if(selectElement){const selectedOption=selectElement.options[selectElement.selectedIndex];return console.log("selected",selectedOption),selectedOption.innerHTML}return""}function getSelectedVariant(){const radioElements=document.querySelectorAll('input[name="option-1"]');for(const radioElement of radioElements)if(radioElement.checked)return radioElement.value}$broth.selected.addEventListener("click",function(){$broth.selector.classList.toggle("active")});function refreshYotpo(){var api=new Yotpo.API(yotpo);api.refreshWidgets()}const flavorSwitched=new Event("flavorSwitched");for(const singleBroth of $broth.all)singleBroth.addEventListener("click",function(){singleBroth.classList.contains("hover")||document.dispatchEvent(flavorSwitched);const thisFlavor={data:singleBroth.getAttribute("data-flavor"),name:singleBroth.getAttribute("data-flavor-string"),handle:singleBroth.getAttribute("data-handle"),productId:singleBroth.getAttribute("data-product-id"),description:singleBroth.getAttribute("data-product-description"),flavorColor:singleBroth.getAttribute("data-flavor-color"),shortDescription:singleBroth.getAttribute("data-short-description"),productImage:singleBroth.getAttribute("data-product-image"),productTitle:singleBroth.getAttribute("data-product-title"),ingredients:singleBroth.getAttribute("data-ingredients"),ingredients_bg:singleBroth.getAttribute("data-ingredients-bg"),ingredientsList:singleBroth.getAttribute("data-ingredients-list"),ingredientsTitle:singleBroth.getAttribute("data-ingredients-title"),howToMedia:singleBroth.getAttribute("data-how-to-media"),delayDescription:singleBroth.getAttribute("data-delay-description"),box2:singleBroth.getAttribute("data-2-box"),box4:singleBroth.getAttribute("data-4-box"),box6:singleBroth.getAttribute("data-6-box"),box2inventory:singleBroth.getAttribute("data-2-box-inventory"),box4inventory:singleBroth.getAttribute("data-4-box-inventory"),box6inventory:singleBroth.getAttribute("data-6-box-inventory"),box2selling:singleBroth.getAttribute("data-2-keep-selling"),box4selling:singleBroth.getAttribute("data-4-keep-selling"),box6selling:singleBroth.getAttribute("data-6-keep-selling"),sellingPlan2:singleBroth.getAttribute("data-selling-plan-2"),sellingPlan3:singleBroth.getAttribute("data-selling-plan-3"),sellingPlan4:singleBroth.getAttribute("data-selling-plan-4"),sellingPlan5:singleBroth.getAttribute("data-selling-plan-5"),sellingPlan6:singleBroth.getAttribute("data-selling-plan-6"),sellingPlan7:singleBroth.getAttribute("data-selling-plan-7"),sellingPlan8:singleBroth.getAttribute("data-selling-plan-8")},existingFlavor={data:$broth.selected.getAttribute("data-flavor"),handle:$broth.selected.getAttribute("data-handle"),description:document.querySelector(".product-description__content-inner"),shortDescription:document.querySelector(".product__short-description"),productTitle:document.querySelector(".product-description__title"),productImage:document.querySelector(".product-description__image img"),ingredients:document.querySelector(".ingredients__image [data-popup-btn]"),ingredients_bg:document.querySelector(".ingredients__image img"),ingredientsTitle:document.querySelector(".ingredients__content-title"),ingredientsList:document.querySelector(".ingredients__list"),howToMedia:document.querySelector(".how-to__media"),delayDescription:document.querySelector(".delay")},addToCartBtn=document.querySelector(".product__submit"),addToCartBtnFlavor=document.querySelector(".submit.flavor");console.log("thisFlavor2",thisFlavor),window.history.pushState({},"","/products/"+thisFlavor.handle),$broth.circle.classList.remove(existingFlavor.data),$broth.circle.style.backgroundColor=thisFlavor.flavorColor,document.querySelector(".yotpo.bottomLine").setAttribute("data-product-id",thisFlavor.productId),document.querySelector(".yotpo-main-widget")?.setAttribute("data-product-id",thisFlavor.productId),$broth.circle.classList.add(thisFlavor.data),$broth.name.classList.add(thisFlavor.data),$broth.selected.setAttribute("data-flavor",thisFlavor.data),$broth.selected.setAttribute("data-flavor-string",thisFlavor.name),$broth.selected.setAttribute("data-handle",thisFlavor.handle),$broth.name.innerHTML=thisFlavor.name,checkFlavors(),existingFlavor.description.innerHTML=thisFlavor.description,existingFlavor.shortDescription.innerHTML=thisFlavor.shortDescription,thisFlavor.productTitle?existingFlavor.productTitle.innerHTML=thisFlavor.productTitle:existingFlavor.productTitle.innerHTML=thisFlavor.name,thisFlavor.productImage.startsWith("Liquid error")||(existingFlavor.productImage.src=thisFlavor.productImage),existingFlavor.ingredientsTitle&&(existingFlavor.ingredientsTitle.innerHTML=thisFlavor.ingredientsTitle),existingFlavor.ingredientsList&&(existingFlavor.ingredientsList.innerHTML=thisFlavor.ingredientsList),existingFlavor.delayDescription&&(existingFlavor.delayDescription.innerHTML="<span>"+thisFlavor.delayDescription+"</span>"),thisFlavor.ingredients_bg&&thisFlavor.ingredients_bg.length>0?existingFlavor.ingredients_bg.src=thisFlavor.ingredients_bg:existingFlavor.ingredients_bg.src="https://cdn.shopify.com/shopifycloud/shopify/assets/no-image-2048-5e88c1b20e087fb7bbe9a3771824e743c244f437e4f8ba93bbf7b11b53f7824c_600x600.gif",thisFlavor.ingredients&&thisFlavor.ingredients.length>0?(existingFlavor.ingredients.classList.remove("d-none"),existingFlavor.ingredients.setAttribute("data-popup-content",thisFlavor.ingredients)):existingFlavor.ingredients.classList.add("d-none"),thisFlavor.howToMedia&&thisFlavor.howToMedia.length>0&&(existingFlavor.howToMedia.innerHTML=thisFlavor.howToMedia);const yotpoPicturesWidget=document.querySelector(".yotpo-pictures-widget");thisFlavor.productId&&yotpoPicturesWidget&&(yotpoPicturesWidget.dataset.productId=thisFlavor.productId);const selectedSellingPlan=getSellingPlanSchedule();document.getElementById("flavor_selector_type").value==="Lemon Sips"?selectedSellingPlan==="Delivery every 4 weeks"?$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan2):selectedSellingPlan==="Delivery every 6 weeks"?$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan3):selectedSellingPlan==="Delivery every 8 weeks"?$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan4):selectedSellingPlan==="Delivery every 12 weeks"&&$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan5):selectedSellingPlan==="Delivery every 2 weeks"?$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan2):selectedSellingPlan==="Delivery every 3 weeks"?$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan3):selectedSellingPlan==="Delivery every 4 weeks"?$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan4):selectedSellingPlan==="Delivery every 5 weeks"?$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan5):selectedSellingPlan==="Delivery every 6 weeks"?$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan6):selectedSellingPlan==="Delivery every 7 weeks"?$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan7):selectedSellingPlan==="Delivery every 8 weeks"&&$broth.selected.setAttribute("data-selling-plan",thisFlavor.sellingPlan8);const variantBoxes=getSelectedVariant();variantBoxes==="2 Boxes"?$broth.selected.setAttribute("data-variant-id",thisFlavor.box2):variantBoxes==="4 Boxes"?$broth.selected.setAttribute("data-variant-id",thisFlavor.box4):variantBoxes==="6 Boxes"&&$broth.selected.setAttribute("data-variant-id",thisFlavor.box6);let soldOut2=!1,soldOut4=!1,soldOut6=!1;const swatches=document.querySelector('.swatch[data-option-index="0"]'),swatchesWrapper=document.querySelector(".swatches-wrapper");thisFlavor.box2inventory<=1&&thisFlavor.box2selling!=="continue"?(document.querySelector('.product-option__select li span[data-value="2 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="2 Boxes"]').classList.add("soldout"),soldOut2=!0):document.querySelector('.product-option__select li span[data-value="2 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="2 Boxes"]').classList.remove("soldout"),thisFlavor.box4inventory<=1&&thisFlavor.box4selling!=="continue"?(document.querySelector('.product-option__select li span[data-value="4 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="4 Boxes"]').classList.add("soldout"),soldOut4=!0):document.querySelector('.product-option__select li span[data-value="4 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="4 Boxes"]').classList.remove("soldout"),thisFlavor.box6inventory<=1&&thisFlavor.box6selling!=="continue"?(document.querySelector('.product-option__select li span[data-value="6 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="6 Boxes"]').classList.add("soldout"),soldOut6=!0):document.querySelector('.product-option__select li span[data-value="6 Boxes"]')&&document.querySelector('.product-option__select li span[data-value="6 Boxes"]').classList.remove("soldout"),document.getElementById("flavor-is-soldout")&&(!soldOut2||!soldOut4||!soldOut6)&&window.location.reload(),soldOut2&&soldOut4&&soldOut6?(window.location.reload(),addToCartBtn&&(addToCartBtn.classList.add("disabled"),addToCartBtn.setAttribute("disabled","disabled"),addToCartBtn.innerHTML="Sold Out"),addToCartBtnFlavor&&(addToCartBtnFlavor.classList.add("disabled"),addToCartBtnFlavor.setAttribute("disabled","disabled"),addToCartBtnFlavor.innerHTML="Sold Out")):(addToCartBtn&&(addToCartBtn.classList.remove("disabled"),addToCartBtn.removeAttribute("disabled"),addToCartBtn.innerHTML="Add to cart"),addToCartBtnFlavor&&(addToCartBtnFlavor.classList.remove("disabled"),addToCartBtnFlavor.removeAttribute("disabled"),addToCartBtnFlavor.innerHTML="Add to cart")),getProductData(thisFlavor.handle).then(function(result){const images=result.product.images;for(const[index,image]of images.entries())index===0?(productImages.allMain[0].src=image.src,productImages.allMain[0].srcset=image.src):index===1?(productImages.allMain[1].src=image.src,productImages.allMain[1].srcset=image.src):index===2?(productImages.allMain[2].src=image.src,productImages.allMain[2].srcset=image.src):index===3?(productImages.allMain[3].src=image.src,productImages.allMain[3].srcset=image.src):index===4?(productImages.allMain[4].src=image.src,productImages.allMain[4].srcset=image.src):index===5&&(productImages.allMain[5].src=image.src,productImages.allMain[5].srcset=image.src)}),document.getElementById("flavor_selector_type")&&(document.getElementById("flavor_selector_type").value==="Bone Broth"&&(document.querySelector(".product__title").innerHTML="Dr. KellyAnn's Bone Broth - "+thisFlavor.name),document.getElementById("flavor_selector_type").value==="Lemon Sips"&&(thisFlavor.name==="Lemon Sips"?document.querySelector(".product__title").innerHTML="Lemon Sips":document.querySelector(".product__title").innerHTML="Lemon Sips - "+thisFlavor.name)),refreshYotpo(),$broth.selector.classList.toggle("active")});function productOptionsChange(){const productOptions=document.querySelectorAll(".product-option__select li"),submitButton=document.querySelector(".product__submit"),submitFlavor=document.querySelector(".submit.flavor");console.log("product options change");for(const productOption of productOptions)productOption.addEventListener("click",function(){productOption.querySelector("span").classList.contains("soldout")?(submitButton&&(submitButton.classList.add("disabled"),submitButton.setAttribute("disabled","disabled")),submitFlavor&&(submitFlavor.classList.add("disabled"),submitFlavor.setAttribute("disabled","disabled")),setTimeout(function(){submitButton&&(submitButton.innerHTML="Sold Out"),submitFlavor&&(submitFlavor.innerHTML="Sold Out")},6)):(submitButton&&(submitButton.classList.remove("disabled"),submitButton.removeAttribute("disabled")),submitFlavor&&(submitFlavor.classList.remove("disabled"),submitFlavor.removeAttribute("disabled")),setTimeout(function(){submitButton&&(submitButton.innerHTML="Add to Cart"),submitFlavor&&(submitFlavor.innerHTML="Add to Cart")},6))})}productOptionsChange();function getPurchaseOption(){const options=document.getElementsByName("purchaseOption");for(const option of options)if(option.checked)return option.value;return null}const variantOptions=document.querySelectorAll('input[name="option-1"]');for(const radioElement of variantOptions)radioElement.addEventListener("change",function(){const selectedHandle=$broth.selected.getAttribute("data-handle");this.value==="2 Boxes"?$broth.selected.setAttribute("data-variant-id",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-2-box")):this.value==="4 Boxes"?$broth.selected.setAttribute("data-variant-id",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-4-box")):this.value==="6 Boxes"&&$broth.selected.setAttribute("data-variant-id",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-6-box"))});document.addEventListener("flavorSwitched",e=>{console.log("flavor switched");let submitButton=document.querySelector(".product__submit"),submitFlavor=document.querySelector(".submit.flavor"),klaviyoBIS=document.querySelector(".klaviyo-bis-trigger"),rechargeBox=document.querySelector(".rc-widget-injection-parent");rechargeBox&&rechargeBox.classList.remove("d-none"),submitFlavor&&submitFlavor.classList.remove("d-none"),submitButton&&submitButton.classList.add("d-none"),klaviyoBIS&&klaviyoBIS.classList.add("d-none"),document.getElementById("flavor_selector").value="true"},!1),document.getElementById("flavor_selector")&&document.querySelector(".submit.flavor").addEventListener("click",function(){let selectedOption;document.querySelector("#purchaseTypeOneTime:checked")?selectedOption="onetime":selectedOption="subscription",console.log("selectedOption",selectedOption);const selectedHandle=$broth.selected.getAttribute("data-handle"),selectedSellingPlan=getSellingPlanSchedule(),selectedBroth=document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]'),masterSelect=document.querySelector("#master-select"),selectedDataOption=masterSelect.options[masterSelect.selectedIndex].getAttribute("data-option-1");let variantId;if(document.getElementById("flavor_selector_type").value==="Lemon Sips"?(selectedDataOption==="1 Jar"&&(variantId=selectedBroth.getAttribute("data-2-box")),selectedDataOption==="3 Jars"&&(variantId=selectedBroth.getAttribute("data-4-box")),selectedDataOption==="6 Jars"&&(variantId=selectedBroth.getAttribute("data-6-box"))):(selectedDataOption==="2 Boxes"&&(variantId=selectedBroth.getAttribute("data-2-box")),selectedDataOption==="4 Boxes"&&(variantId=selectedBroth.getAttribute("data-4-box")),selectedDataOption==="6 Boxes"&&(variantId=selectedBroth.getAttribute("data-6-box"))),selectedOption==="onetime")brothAddToCart(variantId,1,"");else if(selectedOption==="subscription"){let sellingPlanId;console.log("selectedSellingPlan",selectedSellingPlan),document.getElementById("flavor_selector_type").value==="Lemon Sips"?selectedSellingPlan==="Delivered every 4 weeks"?sellingPlanId=selectedBroth.getAttribute("data-selling-plan-2"):selectedSellingPlan==="Delivered every 6 weeks"?sellingPlanId=selectedBroth.getAttribute("data-selling-plan-3"):selectedSellingPlan==="Delivered every 8 weeks"?sellingPlanId=selectedBroth.getAttribute("data-selling-plan-4"):selectedSellingPlan==="Delivered every 12 weeks"&&(sellingPlanId=selectedBroth.getAttribute("data-selling-plan-5")):selectedSellingPlan==="Delivered every 2 weeks"?sellingPlanId=selectedBroth.getAttribute("data-selling-plan-2"):selectedSellingPlan==="Delivered every 3 weeks"?sellingPlanId=selectedBroth.getAttribute("data-selling-plan-3"):selectedSellingPlan==="Delivered every 4 weeks"?sellingPlanId=selectedBroth.getAttribute("data-selling-plan-4"):selectedSellingPlan==="Delivered every 5 weeks"?sellingPlanId=selectedBroth.getAttribute("data-selling-plan-5"):selectedSellingPlan==="Delivered every 6 weeks"?sellingPlanId=selectedBroth.getAttribute("data-selling-plan-6"):selectedSellingPlan==="Delivered every 7 weeks"?sellingPlanId=selectedBroth.getAttribute("data-selling-plan-7"):selectedSellingPlan==="Delivered every 8 weeks"&&(sellingPlanId=selectedBroth.getAttribute("data-selling-plan-8")),brothAddToCart(variantId,1,sellingPlanId)}});async function brothAddToCart(variantId,quantity,sellingPlan){console.log("brothAddToCart",variantId,quantity,sellingPlan);let formData={items:[{id:variantId,quantity,selling_plan:sellingPlan}]};console.log("formData",formData),fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(formData)}).then(response=>response.json()).then(data=>console.log(data)).catch(error=>{console.error("Error:",error)})}document.addEventListener("change",function(event){const target=event.target,sellingPlanHtml=document.querySelector(".rc-selling-plans-dropdown__select option:checked");if(typeof sellingPlanHtml<"u"&&sellingPlanHtml!=null&&target.matches(".rc-selling-plans-dropdown__select")){const selectedValue=sellingPlanHtml.innerHTML,selectedHandle=$broth.selected.getAttribute("data-handle");selectedValue==="Delivery every 2 Weeks"?$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-2")):selectedValue==="Delivery every 3 Weeks"?$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-3")):selectedValue==="Delivery every 4 Weeks"?$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-4")):selectedValue==="Delivery every 5 Weeks"?$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-5")):selectedValue==="Delivery every 6 Weeks"?$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-6")):selectedValue==="Delivery every 7 Weeks"?$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-7")):selectedValue==="Delivery every 8 Weeks"&&$broth.selected.setAttribute("data-selling-plan",document.querySelector('.single-broth[data-handle="'+selectedHandle+'"]').getAttribute("data-selling-plan-8"))}})},1e3);
//# sourceMappingURL=/cdn/shop/t/229/assets/product.js.map?v=53385877558620460141736442406
